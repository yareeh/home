if [ -f /etc/zprofile ]; then
	source /etc/zprofile
fi

if [ -f ~/.ssh/env ]; then
   source ~/.ssh/env
fi

# OS detection
if [[ "$OSTYPE" == "darwin"* ]]; then
    IS_MAC=true
else
    IS_MAC=false
fi

export LESS=-iFeRX
export TERM=xterm-color

# PATH setup (platform-specific)
if $IS_MAC; then
    PATH=${PATH}:$HOME/git/boots/bin:/opt/homebrew/bin
    # OpenJDK via Homebrew
    export PATH="/opt/homebrew/opt/openjdk@17/bin:$PATH"
    export CPPFLAGS="-I/opt/homebrew/opt/openjdk@17/include"
    # Python path
    export PATH="$PATH:$HOME/Library/Python/3.9/bin"
else
    # Linux: use system Java or SDKMAN
    [[ -d /usr/lib/jvm/java-17-openjdk ]] && export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
    [[ -d /usr/lib/jvm/java-17-openjdk-amd64 ]] && export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
    [[ -n "$JAVA_HOME" && -d "$JAVA_HOME/bin" ]] && export PATH="$JAVA_HOME/bin:$PATH"
fi

# VSCode as default editor
export EDITOR='cursor -w'

export PYENV_ROOT="$HOME/.pyenv"
[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init - zsh)"
